worker_processes  auto;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;
    sendfile        on;
    keepalive_timeout  65;
    gzip  on;

    server {
        listen       5000;
        server_name  user.zdoo.com;
        
        location / {
            alias   /app/zdoo/ranzhi/;
            index index.php index.html index.htm;
        }
        location ~ \.php {
            fastcgi_index index.php;
            fastcgi_pass 127.0.0.1:9000;
            include      fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        }
        
        location /pm/ {
            alias   /app/zdoo/chanzhi/;
            index index.php index.html index.htm;
        }
        location ~ /pm/.*\.php {
            fastcgi_index index.php;
            fastcgi_pass 127.0.0.1:9000;
            include      fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        }
        
        location /cms/ {
            alias   /app/zdoo/zentao/;
            index index.php index.html index.htm;
        }
        location ~ /cms/.*\.php {
            fastcgi_index index.php;
            fastcgi_pass 127.0.0.1:9000;
            include      fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        }
    }
}
